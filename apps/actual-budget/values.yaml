# Custom values for the Actual Budget subchart
actualbudget:
  # Resources
# Basic deployment
  replicaCount: 1
  strategy:
    type: Recreate

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 200m
      memory: 256Mi

  # Persistence
  persistence:
    enabled: true
    size: 20Gi
    existingClaim: "actual-budget-pvc"
    subPath: "actual-budget"
    accessModes:
      - ReadWriteOnce
    annotations:
      backup.kubernetes.io/enabled: "true"

  # Image configuration
  image:
    repository: actualbudget/actual-server
    pullPolicy: IfNotPresent

  # File storage
  files:
    dataDirectory: /data
    server: /data/server-files
    user: /data/user-files

#actualbudget:
# Ingress
  ingress:
    enabled: true
    className: nginx
    hosts:
      - host: actual-budget.hoareau-marion.eu
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls:
      - secretName: actual-budget-hoareau-marion-eu-tls
        hosts:
          - actual-budget.hoareau-marion.eu

# Extra resources (e.g., Certificate)
extraResources:
  - apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      name: actual-budget-hoareau-marion-eu-tls
      namespace: actual-budget
    spec:
      secretName: actual-budget-hoareau-marion-eu-tls
      issuerRef:
        name: letsencrypt
        kind: ClusterIssuer
      dnsNames:
        - actual-budget.hoareau-marion.eu
  - apiVersion: v1
    kind: PersistentVolumeClaim
    metadata:
      name: actual-budget-pvc
      namespace: actual-budget
    spec:
      accessModes:
        - ReadWriteMany
      resources:
        requests:
          storage: 20Gi
      volumeName: apps-nfs-persistent-volume
      storageClassName: ""